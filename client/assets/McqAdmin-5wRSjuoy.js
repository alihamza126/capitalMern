import{r as c,J as L,d as M,K as T,Q as R,U as B,V as z,j as e,W as $,e as s,X as N,Y as p,S as A,f as q,Z as H,_ as P,$ as W,I as J,g as K,C as V}from"./index-Bi6rx8zx.js";import{B as X}from"./Button-V0B5DU3g.js";const ee=()=>{const[r,g]=c.useState({}),[y,m]=c.useState(L),[n,O]=c.useState("english"),[C,l]=c.useState([]),[j,w]=c.useState(""),[F,b]=c.useState(null),[k,v]=c.useState(""),[G,f]=c.useState(!1),{enqueueSnackbar:D}=M(),h=(t,o)=>{D(t,{variant:o,autoHideDuration:4e3,anchorOrigin:{vertical:"top",horizontal:"center"},action:e.jsx(J,{size:"small","aria-label":"close",color:"inherit",onClick:()=>K(),children:e.jsx(V,{fontSize:"small"})})})},[a,u]=c.useState({question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",subject:"english",chapter:"",topic:"",course:"nums",info:"",explain:"",imageUrl:""}),d=t=>{const{name:o,value:i}=t.target;if(o.startsWith("option")){const I=parseInt(o.slice(-1))-1,x=[...a.options];x[I]=i,u({...a,options:x})}else u({...a,[o]:i})},E=async t=>{f(!0),t.preventDefault();const o={};if(a.question.trim()||(o.question="Question is required"),a.options.some(i=>!i.trim())&&(o.options="All options are required"),a.correctOption||(o.correctOption="Correct Option is required"),a.chapter.trim()||(o.chapter="Chapter is required"),n!=="logic"&&n!=="english"&&(a.topic.trim()||(o.topic="Topic is required")),Object.keys(o).length===0)if(F)try{const i=new FormData;i.append("image",F);const I={headers:{"Content-Type":"multipart/form-data"}},x=await q.post("/upload/img",i,I);if(x.status===200)try{const S={...a,imageUrl:x.data.fileURL},Y=await q.post("/mcq/add",S);h("MCQ added successfully with Image","success"),f(!1),b(null),v(""),g({}),w(""),l([]),u({...a,question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",topic:"",chapter:"",explain:"",imageUrl:"",info:""})}catch(S){h(S.message,"error")}else h("Failed to upload image","error")}catch{h("Failed to upload image","error"),f(!1)}else try{await q.post("/mcq/add",a),h("MCQ added successfully without Image","success"),b(null),v(""),g({}),u({...a,question:"",options:["","","",""],correctOption:"",difficulty:"easy",category:"normal",topic:"",chapter:"",explain:"",imageUrl:"",info:""})}catch{h("Failed to add MCQ","error")}else g(o);f(!1)};c.useEffect(()=>{n==="biology"?(m(T),l([])):n==="chemistry"?(m(R),l([])):n==="physics"?(m(B),l([])):n==="logic"?(m(z),l([])):n==="english"&&(m(L),l([]))},[n]),c.useEffect(()=>{if(n==="biology"){const t=H[j];l(t)}else if(n==="chemistry"){const t=P[j];l(t)}else if(n==="physics"){const t=W[j];l(t)}else(n==="logic"||n==="english")&&l([])},[j]);const Q=t=>{const o=t.target.files[0],i=new FileReader;i.onload=()=>{v(i.result)},i.readAsDataURL(o),b(o)},U=t=>{const{name:o,value:i}=t.target;l([]),u({...a,[o]:i,topic:"",chapter:""}),O(t.target.value)};return e.jsxs($,{children:[e.jsx("h1",{className:"text-primary fw-bold py-2 px-4",children:"MCQ Form"}),e.jsxs(s,{children:[e.jsxs(s.Group,{controlId:"question",children:[e.jsx(s.Label,{className:"fw-bold",children:"Question"}),e.jsx(s.Control,{type:"text",name:"question",value:a.question,onChange:d,isInvalid:!!r.question}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.question})]}),e.jsx("div",{className:"card p-3 my-2 border-primary",children:[1,2,3,4].map(t=>e.jsxs(s.Group,{controlId:`option${t}`,className:"py-1",children:[e.jsxs(s.Label,{children:["Option ",t]}),e.jsx(s.Control,{type:"text",name:`option${t}`,value:a.options[t-1],onChange:d,isInvalid:!!r.options}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.options})]},t))}),e.jsx(N,{className:"py-2",children:e.jsx(p,{children:e.jsxs(s.Group,{controlId:"correctOption",children:[e.jsx(s.Label,{className:"fw-bold",children:"Correct Option No"}),e.jsx(s.Control,{type:"number",min:1,max:4,name:"correctOption",value:a.correctOption,onChange:d,isInvalid:!!r.correctOption}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.correctOption})]})})}),e.jsxs(N,{className:"py-3",children:[e.jsx(p,{md:2,children:e.jsxs(s.Group,{controlId:"difficulty",children:[e.jsx(s.Label,{children:"Difficulty"}),e.jsxs(s.Control,{as:"select",name:"difficulty",value:a.difficulty,onChange:d,children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"hard",children:"Hard"})]})]})}),e.jsx(p,{md:2,children:e.jsxs(s.Group,{controlId:"category",children:[e.jsx(s.Label,{children:"Category"}),e.jsxs(s.Control,{as:"select",name:"category",value:a.category,onChange:d,children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"past",children:"Past"})]})]})}),e.jsx(p,{md:4,children:e.jsxs(s.Group,{controlId:"info",children:[e.jsx(s.Label,{className:"fw-bold",children:"MCQ Info"}),e.jsx(s.Control,{type:"text",maxLength:9,name:"info",placeholder:"For Example Bwp-2021",value:a.info,onChange:d,isInvalid:!!r.info}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.info})]})}),e.jsx(p,{md:4,children:e.jsxs(s.Group,{controlId:"subject",children:[e.jsx(s.Label,{children:"Subject"}),e.jsxs(s.Control,{as:"select",name:"subject",value:a.subject,onChange:U,children:[e.jsx("option",{value:"english",children:"English"}),e.jsx("option",{value:"chemistry",children:"Chemistry"}),e.jsx("option",{value:"physics",children:"Physics"}),e.jsx("option",{value:"logic",children:"Logic"}),e.jsx("option",{value:"biology",children:"Biology"})]})]})})]}),e.jsxs(N,{className:"py-3",children:[e.jsx(p,{md:2,children:e.jsxs(s.Group,{controlId:"course",children:[e.jsx(s.Label,{children:"Course"}),e.jsxs(s.Control,{as:"select",name:"course",value:a.course,onChange:d,children:[e.jsx("option",{value:"nums",children:"Nums"}),e.jsx("option",{value:"mdcat",children:"Mdcat"})]})]})}),e.jsx(p,{md:5,children:e.jsxs(s.Group,{controlId:"chapter",children:[e.jsx(s.Label,{children:"Chapter"}),e.jsxs(s.Control,{as:"select",placeholder:"Select Chapter",name:"chapter",value:a.chapter,onChange:t=>w(t.target.value),onChangeCapture:d,isInvalid:!!r.chapter,children:[e.jsx("option",{value:"",children:"Select Chapter"}),y==null?void 0:y.map((t,o)=>e.jsx("option",{value:t,children:t},o))]}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.chapter})]})}),e.jsx(p,{md:5,children:e.jsxs(s.Group,{controlId:"topic",children:[e.jsx(s.Label,{children:"Topic"}),e.jsxs(s.Control,{as:"select",name:"topic",value:a.topic,onChange:d,isInvalid:!!r.topic,children:[e.jsx("option",{value:"",children:"Select Topic"}),C==null?void 0:C.map((t,o)=>e.jsx("option",{value:t,children:t},o))]}),e.jsx(s.Control.Feedback,{type:"invalid",children:r.topic})]})})]}),e.jsxs(s.Group,{controlId:"explain",children:[e.jsx(s.Label,{children:"Explanation"}),e.jsx(s.Control,{as:"textarea",name:"explain",value:a.explain,onChange:d})]}),e.jsx("div",{className:"row py-1 my-3",children:e.jsx("div",{className:"col-md-12 col-12 mb-4",children:e.jsxs("div",{className:"p-1 d-flex gap-2",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("input",{id:"file",type:"file",hidden:!0,accept:"image/*",onChange:Q}),e.jsx("label",{htmlFor:"file",name:"file",className:"d-flex justify-content-center",children:e.jsx("span",{className:"btn btn-secondary btn-sm w-100 px-5 mt- h-25",children:"Select Image"})})]}),e.jsx("img",{height:150,src:k,alt:"Image not selected",className:"border border-primary rounded-2 overflow-hidden"})]})})}),e.jsxs(X,{variant:"primary",className:"px-5 fw-bold",type:"submit",onClick:E,children:["Submit ",G&&e.jsx(A,{className:"ms-1",size:"sm"})]})]})]})};export{ee as default};
