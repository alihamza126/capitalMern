import{c as R,j as e,r as c,d as S,e as s,S as f,f as j}from"./index-Bi6rx8zx.js";import{B as d}from"./Button-V0B5DU3g.js";import{M as r}from"./Modal-DcxzEvxn.js";const L=R(e.jsx("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12z"}),"Label"),E=()=>{const[y,n]=c.useState(!1),[o,m]=c.useState(!1),{enqueueSnackbar:l}=S(),[w,_]=c.useState([]),[g,x]=c.useState(!1),[p,u]=c.useState(!1),[t,i]=c.useState({name:"",comment:"",city:"",id:""}),C=async()=>{_([...w,t]),i({name:"",comment:"",city:""}),x(!1);try{n(!0),await j.post("/reviews/new",t),l("Review added successfully",{variant:"success",autoHideDuration:1500}),n(!1),m(!o)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500}),n(!1),m(!o)}},b=async a=>{try{n(!0),await j.delete(`/reviews/${a}`),l("Review Deleted successfully",{variant:"warning",autoHideDuration:1500}),n(!1),m(!o)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500}),n(!1),m(!o)}},N=async()=>{try{n(!0),await j.put(`/reviews/${t.id}`,t),l("Review Updated successfully",{variant:"success",autoHideDuration:1500}),n(!1),m(!o)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500}),n(!1),m(!o)}i({name:"",comment:"",city:""}),u(!1)};return c.useEffect(()=>{(async()=>{try{const h=await j.get("/reviews");_(h.data),n(!1)}catch{l("Something went Wrong",{variant:"error",autoHideDuration:1500})}})()},[o]),e.jsxs("div",{className:"admin-reviews ",children:[e.jsxs("div",{className:"container d-flex justify-content-between my-3",children:[e.jsxs("h3",{className:"fw-bold text-primary",children:["Reviews(",w.length,")"]}),e.jsx(d,{variant:"success",style:{height:"80%",fontWeight:"bold"},size:"sm",onClick:()=>x(!0),children:"Add Review"})]}),e.jsx("div",{className:"admin-reviews__container p-4",style:{height:"90vh",overflow:"scroll"},children:w.map((a,h)=>e.jsx("div",{className:"admin-reviews__container__review shadow-lg border border-primary rounded-2 my-4 py-2",children:e.jsxs("div",{className:"container",children:[e.jsx(L,{style:{color:"skyblue"}})," ",e.jsx("strong",{children:h+1}),e.jsxs("div",{className:"admin-reviews__container__review__name",children:[e.jsx("label",{htmlFor:"name",className:"fw-bold text-success mt-2 me-2",children:"Name :"}),e.jsx("strong",{children:a.name})]}),e.jsxs("div",{className:"admin-reviews__container__review__name",children:[e.jsx("label",{htmlFor:"comment",className:"fw-bold text-primary mt-2 me-2",children:"Review:"}),e.jsx("textarea",{readOnly:!0,cols:"30",rows:"3",className:"form-control",style:{resize:"none"},children:a.comment})]}),e.jsxs("div",{className:"admin-reviews__container__review__name",children:[e.jsx("label",{htmlFor:"comment",className:"fw-bold text-info mt-2 me-2",children:"City:"}),e.jsx("strong",{children:a.city})]}),e.jsx("div",{className:"admin-reviews__container__review__city mb-3"}),e.jsx("div",{className:"admin-reviews__container__review__edit"}),e.jsx(d,{variant:"primary",size:"sm",onClick:()=>{u(!0),i({name:a.name,comment:a.comment,city:a.city,id:a._id})},children:"Edit"}),e.jsxs(r,{show:p,onHide:()=>u(!1),children:[e.jsx(r.Header,{closeButton:!0,children:e.jsx(r.Title,{children:"Edit Review"})}),e.jsx(r.Body,{children:e.jsxs(s,{children:[e.jsxs(s.Group,{controlId:"name",children:[e.jsx(s.Label,{children:"Name"}),e.jsx(s.Control,{type:"text",value:t.name,onChange:v=>i({...t,name:v.target.value})})]}),e.jsxs(s.Group,{controlId:"comment",children:[e.jsx(s.Label,{children:"Comment"}),e.jsx(s.Control,{as:"textarea",rows:3,value:t.comment,onChange:v=>i({...t,comment:v.target.value})})]}),e.jsxs(s.Group,{controlId:"city",children:[e.jsx(s.Label,{children:"City"}),e.jsx(s.Control,{type:"text",value:t.city,onChange:v=>i({...t,city:v.target.value})})]})]})}),e.jsxs(r.Footer,{children:[e.jsx(d,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),e.jsxs(d,{variant:"primary",onClick:()=>N(),children:["Save Changes",y&&e.jsx(f,{animation:"border",size:"sm",variant:"light",className:"ms-1"})]})]})]}),e.jsx("div",{className:"admin-reviews__container__review__delete d-inline ms-3",children:e.jsx(d,{variant:"danger",size:"sm",onClick:()=>b(a._id),children:"Delete"})})]})},h))}),e.jsxs(r,{show:g,onHide:()=>x(!1),children:[e.jsx(r.Header,{closeButton:!0,children:e.jsx(r.Title,{children:"Add Review"})}),e.jsx(r.Body,{children:e.jsxs(s,{children:[e.jsxs(s.Group,{controlId:"name",className:"my-2",children:[e.jsx(s.Label,{children:"Name"}),e.jsx(s.Control,{type:"text",value:t.name,onChange:a=>i({...t,name:a.target.value})})]}),e.jsxs(s.Group,{controlId:"comment",className:"my-2",children:[e.jsx(s.Label,{children:"Comment"}),e.jsx(s.Control,{as:"textarea",rows:3,value:t.comment,onChange:a=>i({...t,comment:a.target.value})})]}),e.jsxs(s.Group,{controlId:"city",className:"my-2",children:[e.jsx(s.Label,{children:"City"}),e.jsx(s.Control,{type:"text",value:t.city,onChange:a=>i({...t,city:a.target.value})})]})]})}),e.jsxs(r.Footer,{children:[e.jsx(d,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),e.jsxs(d,{variant:"primary",onClick:C,children:["Add Review",y&&e.jsx(f,{animation:"border",size:"sm",variant:"light",className:"ms-1"})]})]})]})]})};export{E as default};
