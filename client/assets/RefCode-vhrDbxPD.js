import{r as a,d as y,j as e,E as c,T as n,f as l}from"./index-Bi6rx8zx.js";const C=()=>{const[i,h]=a.useState(""),[x,u]=a.useState(""),[j,m]=a.useState(""),[f,p]=a.useState([]),[r,o]=a.useState(!1),{enqueueSnackbar:d}=y(),D=t=>{const s=new Date,g=new Date(t)-s;return Math.ceil(g/(1e3*60*60*24))},b=async()=>{try{const t=await l.post("/referal",{code:i,priceDiscount:x,expireDate:j});o(!r),d("Referral code added successfully",{variant:"success",autoHideDuration:2e3})}catch(t){console.log(t)}},v=t=>async()=>{try{const s=await l.delete(`/referal/${t}`);o(!r),d("Referral code removed successfully",{variant:"warning",autoHideDuration:2e3})}catch(s){console.log(s)}};return a.useEffect(()=>{(async()=>{const s=await l.get("/referal");p(s.data)})()},[r]),e.jsxs("div",{className:"refrell-code",children:[e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"row my-3",children:e.jsx("div",{className:"h2 text-primary fw-bold",children:"Referrals code"})}),e.jsxs("div",{className:"row gy-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(c,{fullWidth:!0,children:e.jsx(n,{label:"Referral Code",onChange:t=>h(t.target.value)})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{fullWidth:!0,children:e.jsx(n,{label:"Discount Percentage",type:"number",onChange:t=>u(t.target.value)})})}),e.jsx("div",{className:"col-md-4",children:e.jsx(c,{fullWidth:!0,children:e.jsx(n,{label:"Expiration Date",type:"date",InputLabelProps:{shrink:!0},onChange:t=>m(t.target.value)})})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-4 py-4",children:e.jsx("button",{className:"btn btn-primary",onClick:b,children:"Add Referral"})})})]}),e.jsx("div",{className:"container table-responsive mt-5 pt-1",children:e.jsxs("table",{className:"table table-striped table-hover table-secondary rounded-4 shadow",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-warning",children:[e.jsx("th",{scope:"col",children:"Referral Code"}),e.jsx("th",{scope:"col",children:"Discount"}),e.jsx("th",{scope:"col",children:"Expiration Date"}),e.jsx("th",{scope:"col",children:"Days Left"}),e.jsx("th",{scope:"col",children:"Remove"})]})}),e.jsx("tbody",{children:f.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.code}),e.jsxs("td",{children:[t.priceDiscount,"%"]}),e.jsx("td",{children:new Date(t.expireDate).toLocaleDateString()}),e.jsx("td",{children:D(t.expireDate)}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger btn-sm rounded-2",onClick:v(t._id),children:"Remove"})})]},s))})]})})]})};export{C as default};
