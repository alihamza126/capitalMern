import{r as i,d as W,u as k,j as e,bf as E,aR as F,bg as R,aF as j,ag as y,aS as t,T as s,ao as D,I,aq as L,ap as B,D as M,S as U,L as b,bh as z,f as O}from"./index-Bi6rx8zx.js";function V(c){return e.jsxs(y,{variant:"body2",color:"text.secondary",align:"center",...c,children:["Copyright Â© ",e.jsx(b,{color:"inherit",to:"/",children:"The Capital Academy"})," ",new Date().getFullYear(),"."]})}const G=z();function $(){const[c,u]=i.useState(!1),[r,v]=i.useState({}),{enqueueSnackbar:o}=W(),w=k(),[h,S]=i.useState(0),[x,C]=i.useState(0),[p,T]=i.useState(0),A=async n=>{n.preventDefault();const l=new FormData(n.currentTarget),d={};for(let[a,m]of l.entries())m.trim()||(d[a]=`${a.charAt(0).toUpperCase()+a.slice(1)} is required`);v(d);let g={};for(let[a,m]of l.entries())g[a]=m.trim();if(Object.keys(d).length===0)if(h+x==p)try{u(!0);const a=await O.post("/auth/register",g);o(a.data.message,{variant:"success"}),setTimeout(()=>{o("redirecting to login page",{variant:"info"})},1e3),setTimeout(()=>{w("/signin")},3e3),u(!1)}catch(a){u(!1),o(a.response.data.message,{variant:"error"})}else o("Please Fill Right Captcha Answer",{variant:"warning"})},N=()=>{const n=Math.floor(Math.random()*10),l=Math.floor(Math.random()*10);S(n),C(l)};i.useEffect(()=>{N()},[r]);const[f,P]=i.useState(!1),q=()=>{P(n=>!n)};return e.jsx("div",{className:"signup overflow-hidden",children:e.jsx(E,{theme:G,children:e.jsxs(F,{component:"main",maxWidth:"xs",className:"bg-white py- rounded-4 shadow-lg",style:{position:"relative"},children:[e.jsx(R,{}),e.jsxs(j,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(y,{component:"h1",variant:"h4",className:"mt-3 text-secondary fw-bold",children:"Sign up"}),e.jsxs(j,{component:"form",noValidate:!0,onSubmit:A,sx:{mt:3},children:[e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(s,{autoComplete:"given-name",name:"username",required:!0,fullWidth:!0,id:"username",label:"User Name",autoFocus:!0,error:!!r.username,helperText:r.username})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsx(s,{required:!0,fullWidth:!0,id:"fathername",label:"Father Name",name:"fathername",autoComplete:"family-name",error:!!r.fathername,helperText:r.fathername})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(s,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",error:!!r.email,helperText:r.email})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(s,{required:!0,fullWidth:!0,id:"city",label:"Enter city",name:"city",autoComplete:"city",error:!!r.city,helperText:r.city})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(s,{required:!0,fullWidth:!0,id:"contact",label:"Contact No",name:"contact",autoComplete:"contact",error:!!r.contact,helperText:r.contact})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(s,{required:!0,fullWidth:!0,name:"password",label:"Password",type:f?"text":"password",id:"password",autoComplete:"new-password",error:!!r.password,helperText:r.password,InputProps:{endAdornment:e.jsx(D,{position:"end",children:e.jsx(I,{onClick:q,edge:"end",children:f?e.jsx(L,{}):e.jsx(B,{})})})}})}),e.jsxs(t,{container:!0,spacing:3,justifyContent:"center",mt:1,children:[e.jsx(t,{item:!0,xs:2,textAlign:"center",marginRight:"-20px",children:e.jsx(s,{id:"captcha-input1",variant:"outlined",value:h,inputProps:{style:{height:"8px"}}})}),e.jsx(t,{item:!0,fontSize:20,p:1,mt:.7,marginLeft:1,children:"+"}),e.jsx(t,{item:!0,xs:2,marginLeft:"-20px",textAlign:"center",children:e.jsx(s,{readonly:"true",id:"captcha-input1",variant:"outlined",value:x,inputProps:{style:{height:"8px"}}})}),e.jsx(t,{item:!0,fontSize:20,mt:.7,children:"="}),e.jsx(t,{item:!0,xs:3,textAlign:"center",children:e.jsx(s,{value:p,onChange:n=>T(n.target.value),id:"captcha-input1",variant:"outlined",inputProps:{style:{height:"8px"}}})})]})]}),e.jsxs(M,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:["Sign Up"," ",c&&e.jsx(U,{animation:"border",className:"mx-2 mb-1",size:"sm"})]}),e.jsx(t,{container:!0,justifyContent:"flex-end",children:e.jsxs(t,{item:!0,children:["Already have an account?",e.jsx(b,{to:"/signin",children:" Sign in"})]})})]})]}),e.jsx(V,{sx:{mt:5}})]})})})}export{$ as default};
