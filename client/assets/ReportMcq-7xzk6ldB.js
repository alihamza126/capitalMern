import{a1 as I,a2 as _,r,a3 as x,a4 as ne,a5 as re,a6 as f,a7 as c,a8 as U,a9 as F,aa as le,ab as E,ac as ce,j as s,ad as C,ae as H,af as de,ag as P,ah as V,ai as G,aj as J,ak as w,al as N,am as Q,D as B,an as Z,f as z}from"./index-Bi6rx8zx.js";function pe(e){return _("MuiDialog",e)}const ge=I("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),K=ge,he=r.createContext({}),ee=he,ue=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],xe=x(ne,{name:"MuiDialog",slot:"Backdrop",overrides:(e,a)=>a.backdrop})({zIndex:-1}),me=e=>{const{classes:a,scroll:o,maxWidth:n,fullWidth:p,fullScreen:l}=e,g={root:["root"],container:["container",`scroll${f(o)}`],paper:["paper",`paperScroll${f(o)}`,`paperWidth${f(String(n))}`,p&&"paperFullWidth",l&&"paperFullScreen"]};return H(g,pe,a)},be=x(re,{name:"MuiDialog",slot:"Root",overridesResolver:(e,a)=>a.root})({"@media print":{position:"absolute !important"}}),fe=x("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.container,a[`scroll${f(o.scroll)}`]]}})(({ownerState:e})=>c({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Ce=x(U,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.paper,a[`scrollPaper${f(o.scroll)}`],a[`paperWidth${f(String(o.maxWidth))}`],o.fullWidth&&a.paperFullWidth,o.fullScreen&&a.paperFullScreen]}})(({theme:e,ownerState:a})=>c({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},a.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},a.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!a.maxWidth&&{maxWidth:"calc(100% - 64px)"},a.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${K.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},a.maxWidth&&a.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[a.maxWidth]}${e.breakpoints.unit}`,[`&.${K.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[a.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},a.fullWidth&&{width:"calc(100% - 64px)"},a.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${K.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),ve=r.forwardRef(function(a,o){const n=F({props:a,name:"MuiDialog"}),p=le(),l={enter:p.transitions.duration.enteringScreen,exit:p.transitions.duration.leavingScreen},{"aria-describedby":g,"aria-labelledby":d,BackdropComponent:h,BackdropProps:v,children:M,className:L,disableEscapeKeyDown:m=!1,fullScreen:R=!1,fullWidth:S=!1,maxWidth:T="sm",onBackdropClick:D,onClick:y,onClose:j,open:k,PaperComponent:t=U,PaperProps:i={},scroll:u="paper",TransitionComponent:W=de,transitionDuration:q=l,TransitionProps:ae}=n,se=E(n,ue),$=c({},n,{disableEscapeKeyDown:m,fullScreen:R,fullWidth:S,maxWidth:T,scroll:u}),O=me($),Y=r.useRef(),oe=b=>{Y.current=b.target===b.currentTarget},te=b=>{y&&y(b),Y.current&&(Y.current=null,D&&D(b),j&&j(b,"backdropClick"))},X=ce(d),ie=r.useMemo(()=>({titleId:X}),[X]);return s.jsx(be,c({className:C(O.root,L),closeAfterTransition:!0,components:{Backdrop:xe},componentsProps:{backdrop:c({transitionDuration:q,as:h},v)},disableEscapeKeyDown:m,onClose:j,open:k,ref:o,onClick:te,ownerState:$},se,{children:s.jsx(W,c({appear:!0,in:k,timeout:q,role:"presentation"},ae,{children:s.jsx(fe,{className:C(O.container),onMouseDown:oe,ownerState:$,children:s.jsx(Ce,c({as:t,elevation:24,role:"dialog","aria-describedby":g,"aria-labelledby":X},i,{className:C(O.paper,i.className),ownerState:$,children:s.jsx(ee.Provider,{value:ie,children:M})}))})}))}))}),De=ve;function ye(e){return _("MuiDialogActions",e)}I("MuiDialogActions",["root","spacing"]);const je=["className","disableSpacing"],ke=e=>{const{classes:a,disableSpacing:o}=e;return H({root:["root",!o&&"spacing"]},ye,a)},We=x("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,!o.disableSpacing&&a.spacing]}})(({ownerState:e})=>c({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Pe=r.forwardRef(function(a,o){const n=F({props:a,name:"MuiDialogActions"}),{className:p,disableSpacing:l=!1}=n,g=E(n,je),d=c({},n,{disableSpacing:l}),h=ke(d);return s.jsx(We,c({className:C(h.root,p),ownerState:d,ref:o},g))}),Me=Pe;function Re(e){return _("MuiDialogContent",e)}I("MuiDialogContent",["root","dividers"]);function Se(e){return _("MuiDialogTitle",e)}const Te=I("MuiDialogTitle",["root"]),$e=Te,we=["className","dividers"],Ne=e=>{const{classes:a,dividers:o}=e;return H({root:["root",o&&"dividers"]},Re,a)},Be=x("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:o}=e;return[a.root,o.dividers&&a.dividers]}})(({theme:e,ownerState:a})=>c({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},a.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${$e.root} + &`]:{paddingTop:0}})),Ae=r.forwardRef(function(a,o){const n=F({props:a,name:"MuiDialogContent"}),{className:p,dividers:l=!1}=n,g=E(n,we),d=c({},n,{dividers:l}),h=Ne(d);return s.jsx(Be,c({className:C(h.root,p),ownerState:d,ref:o},g))}),Ue=Ae,Ie=["className","id"],_e=e=>{const{classes:a}=e;return H({root:["root"]},Se,a)},Fe=x(P,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,a)=>a.root})({padding:"16px 24px",flex:"0 0 auto"}),Ee=r.forwardRef(function(a,o){const n=F({props:a,name:"MuiDialogTitle"}),{className:p,id:l}=n,g=E(n,Ie),d=n,h=_e(d),{titleId:v=l}=r.useContext(ee);return s.jsx(Fe,c({component:"h2",className:C(h.root,p),ownerState:d,ref:o,variant:"h6",id:l??v},g))}),He=Ee,A=[{id:"name",label:"Name",minWidth:170},{id:"email",label:"Email",minWidth:170},{id:"title",label:"Title",minWidth:170},{id:"msg",label:"Message",minWidth:170},{id:"read",label:"Read",minWidth:100,align:"center"},{id:"actions",label:"Actions",minWidth:100,align:"center"}];function Oe(){const[e,a]=r.useState(0),[o,n]=r.useState(10),[p,l]=r.useState(!1),[g,d]=r.useState(""),[h,v]=r.useState([]),[M,L]=r.useState([]),[m,R]=r.useState(!1),S=(t,i)=>{a(i)},T=t=>{n(+t.target.value),a(0)},D=t=>{d(t),l(!0)},y=()=>{l(!1),d("")},j=async t=>{try{await z.get(`/report/${t}`),R(!m)}catch{}},k=async t=>{try{await z.delete(`/report/${t}`),R(!m)}catch(i){console.log(i)}};return r.useEffect(()=>{(async()=>{try{const u=(await z.get("/report")).data;v(u.filter(W=>W.isRead==!1)),L(u.filter(W=>W.isRead==!0))}catch(i){console.error("Error fetching data:",i)}})()},[m]),s.jsxs("div",{className:"p-2",children:[s.jsx("h1",{className:"text-primary fw-bold px-3 py-1",children:"Unread Messages"}),s.jsxs(U,{sx:{width:"100%",overflow:"hidden"},children:[s.jsx(V,{sx:{maxHeight:440},children:s.jsxs(G,{stickyHeader:!0,"aria-label":"sticky table",children:[s.jsx(J,{children:s.jsx(w,{children:A.map(t=>s.jsx(N,{align:t.align,style:{minWidth:t.minWidth},children:t.label},t.id))})}),s.jsx(Q,{children:h.slice(e*o,e*o+o).map(t=>s.jsx(w,{hover:!0,role:"checkbox",tabIndex:-1,children:A.map(i=>{const u=t[i.id];return s.jsx(N,{align:i.align,children:i.id==="read"?s.jsx(B,{variant:"contained",onClick:()=>j(t._id),children:"Read"}):i.id==="msg"?s.jsxs(P,{variant:"body2",sx:{cursor:"pointer"},onClick:()=>D(t.msg),children:[u.split(" ").slice(0,5).join(" "),"..."]}):i.id==="actions"?s.jsx(B,{variant:"contained",color:"error",onClick:()=>k(t._id),children:"Delete"}):u},i.id)})},t.email))})]})}),s.jsx(Z,{rowsPerPageOptions:[10,25,100],component:"div",count:h.length,rowsPerPage:o,page:e,onPageChange:S,onRowsPerPageChange:T})]}),s.jsx("h1",{className:"text-primary fw-bold px-3 py-2 mt-5",children:"Read Messages"}),s.jsxs(U,{sx:{width:"100%",overflow:"hidden"},children:[s.jsx(V,{sx:{maxHeight:440},children:s.jsxs(G,{stickyHeader:!0,"aria-label":"sticky table",children:[s.jsx(J,{children:s.jsx(w,{children:A.map(t=>s.jsx(N,{align:t.align,style:{minWidth:t.minWidth},children:t.label},t.id))})}),s.jsx(Q,{children:M.slice(e*o,e*o+o).map(t=>s.jsx(w,{hover:!0,role:"checkbox",tabIndex:-1,children:A.map(i=>{const u=t[i.id];return s.jsx(N,{align:i.align,children:i.id==="read"?s.jsx(P,{variant:"body2",color:"textSecondary",children:"Read"}):i.id==="msg"?s.jsxs(P,{variant:"body2",sx:{cursor:"pointer"},onClick:()=>D(t.msg),children:[u.split(" ").slice(0,5).join(" "),"..."]}):i.id==="actions"?s.jsx(B,{variant:"contained",color:"error",onClick:()=>k(t._id),children:"Delete"}):u},i.id)})},t.email))})]})}),s.jsx(Z,{rowsPerPageOptions:[10,25,100],component:"div",count:M.length,rowsPerPage:o,page:e,onPageChange:S,onRowsPerPageChange:T})]}),s.jsxs(De,{open:p,onClose:y,maxWidth:"sm",fullWidth:!0,children:[s.jsx(He,{className:"fw-bold text-primary",children:"Message Details"}),s.jsx(Ue,{children:s.jsx(P,{variant:"body1",children:g})}),s.jsx(Me,{children:s.jsx(B,{onClick:y,color:"primary",children:"Close"})})]})]})}export{Oe as default};
